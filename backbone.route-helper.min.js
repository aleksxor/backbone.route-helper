(function(){!function(t,n){var r,e,o,u,l;return r=function(t,r,e){var o,a,i;return null==e&&(e={}),n.defaults(e,{includeRoot:!0}),this._patterns=this._patterns||{},o=this._patterns[t]||{},this._patterns[t]=o,a=(null!=(i=r.match(/\:\w+/g))?i.length:void 0)||0,o[a]=r,this[t+"Path"]=function(){var t,r,i,s;return t=Array.prototype.slice.call(arguments),r=n(t[t.length-1]).isObject(),a=r?arguments.length-1:arguments.length,s=o[a],i=r?t.pop():null,e.includeRoot&&(s=l(s)),u(s,t,i)}},l=function(n){var r,e,o;return r=t.history,"/"===((null!=r?null!=(o=r.options)?o.root:void 0:void 0)||"/")?n:(e=r.options.root+"/"+n,e.replace("//","/"))},u=function(t,r,o){var u,l,a,i,s;for(a=t,"/"!==a.charAt(0)&&(a="/"+a),i=0,s=r.length;s>i;i++)l=r[i],a=a.replace(/\:\w+/,l);return u=e(o),n.isEmpty(u)||(a+="?"+$.param(u)),a},e=function(t){var r,e,o;r={};for(e in t)o=t[e],n.has(t,e)&&"undefined"!=typeof value&&null!==value&&(r[e]=value);return r},o=t.Router.prototype.route,t.Router.prototype.route=function(t,n,e){return o.call(this,t,n,e),r.call(this,n,t)}}(Backbone,_)}).call(this);