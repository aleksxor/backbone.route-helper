(function(){!function(t,n){var r,e,o,u,a;return r=function(t,r,e){var o,l;return null==e&&(e={}),n.defaults(e,{includeRoot:!1}),this._patterns=this._patterns||{},o=this._patterns[t]||{},this._patterns[t]=o,l=r.match(/\:\w+/g)?r.match(/\:\w+/g).length:0,o[l]=r,this[t+"Path"]=function(){var t,r,i,s;return t=Array.prototype.slice.call(arguments),r=n(t[t.length-1]).isObject(),l=r?arguments.length-1:arguments.length,s=o[l],i=r?t.pop():null,e.includeRoot&&(s=a(s)),u(s,t,i)}},a=function(n){var r,e;return r=t.history,null==r||null==r.options||"/"===r.options.root?n:(e=r.options.root+"/"+n,e.replace("//","/"))},u=function(t,r,o){var u,a,l,i,s;for(l=t,"/"!==l.charAt(0)&&(l="/"+l),i=0,s=r.length;s>i;i++)a=r[i],l=l.replace(/\:\w+/,a);return u=e(o),u&&!n.isEmpty(u)&&(l+="?"+$.param(u)),l},e=function(t){var r,e,o;r={};for(e in t)o=t[e],n.has(t,e)&&"undefined"!=typeof value&&null!==value&&(r[e]=value);return r},o=t.Router.prototype.route,t.Router.prototype.route=function(t,n,e){return o.call(this,t,n,e),r.call(this,n,t)}}(Backbone,_)}).call(this);