(function(){!function(t,n){var r,o,e,l,u;return r=function(t,r,o){var e,a,i;return null==o&&(o={}),n.defaults(o,{includeRoot:!0}),this._patterns=this._patterns||{},e=this._patterns[t]||{},this._patterns[t]=e,a=(null!=(i=r.match(/\:\w+/g))?i.length:void 0)||0,e[a]=r,this[t+"Path"]=function(){var t,r,i,s;return t=Array.prototype.slice.call(arguments),r=n(t[t.length-1]).isObject(),a=r?arguments.length-1:arguments.length,s=e[a],i=r?t.pop():null,o.includeRoot&&(s=u(s)),l(s,t,i)}},u=function(n){var r,o,e;return r=t.history,"/"===((null!=r?null!=(e=r.options)?e.root:void 0:void 0)||"/")?n:(o=r.options.root+"/"+n,o.replace("//","/"))},l=function(t,r,e){var l,u,a,i,s;for(a=t,"/"!==a.charAt(0)&&(a="/"+a),i=0,s=r.length;s>i;i++)u=r[i],a=a.replace(/\:\w+/,u);return l=o(e),n.isEmpty(l)||(a+="?"+$.param(l)),a},o=function(t){var r,o,e;r={};for(o in t)e=t[o],n.has(t,o)&&null!=e&&(r[o]=e);return r},e=t.Router.prototype.route,t.Router.prototype.route=function(t,n,o){return e.call(this,t,n,o),r.call(this,n,t)}}(Backbone,_)}).call(this);